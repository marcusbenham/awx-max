- name: Failover mb_ansible_demo with Replcation
  hosts: localhost
  collections: dellemc.powermax
  connection: local
  gather_facts: no

  vars_files:
    - get_password.yml
    - uni_connection_vars.yml

  vars:
    sg_name: 'mb_ansible_demo'
    remote_serial_no: '000297600448'

    input: &uni_connection_vars
      serial_no: "{{ serial_no }}"
      password: "{{ powermax_password }}"
      unispherehost: "{{ unispherehost }}"
      universion: "{{ universion }}"
      user: "{{ powermax_username }}"
      verifycert: "{{ verifycert }}"

  tasks:
  - name: Failover Replication
    dellemc_powermax_srdf:
      <<: *uni_connection_vars
      sg_name: "{{sg_name}}"
      srdf_state: 'Failover'
      state: 'present'
